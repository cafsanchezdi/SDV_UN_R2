# eband_local_planner_params.yaml

# The local planner computes an elastic band within the local costmap, and 
# attempts to follow the path generated by connecting the center points of the 
# band using various heuristics

# A differential drive robot can be in one of three actions when computing 
# velocity prior to reaching the goal location and orientation:

#  1) The robot is within lateral tolerance (xy_goal_tolerance) of the goal 
#     location, and is rotating in place to reach the goal orientation.
#  2) The robot is outside the lateral tolerance of the goal location, and must 
#     move towards the goal. Given the orientation of the robot, and the 
#     orientation of the next point in the elastic band, the robot first 
#     calculates the difference between these two locations. If this difference 
#     is less than the parameter rotation_threshold_multiplier, then the robot 
#     executes both linear and angular velocity components to arc towards the 
#     next point in the band. Once the robot is close to the goal location such 
#     that the x and y distances to the goal are less than 0.6 * xy_goal_tolerance 
#     then proceed to step 1. Here, 0.6 was chosen as the robot gets closer to 
#     the goal than the tolerance requires before starting the final turn, as 
#     the final turn may cause the robot to move slightly out of position.
#  3) If the difference computed in the previous step is greater than the 
#     parameter rotation_threshold_multiplier, then the robot turns in place 
#     until the difference becomes smaller, and the robot can execute action 2.

# More info in http://wiki.ros.org/eband_local_planner

EBandPlannerROS:

  # Common Parameters
  xy_goal_tolerance: 0.1
  yaw_goal_tolerance: 0.087266

  # Trajectory Controller Parameters 
  differential_drive: true
  max_vel_lin: 0.5
  max_vel_th: 0.4
  min_vel_lin: 0.04
  min_in_place_vel_th: 0.314
  k_prop: 2.5

  # Elastic Band Parameters 
  eband_min_relative_overlap: 0.45
  eband_tiny_bubble_distance: 5.5
  eband_tiny_bubble_expansion: 3.0
  eband_internal_force_gain: 1.0
  eband_external_force_gain: 2.0
  num_iterations_eband_optimization: 3
  eband_equilibrium_approx_max_recursion_depth: 4
  eband_equilibrium_relative_overshoot: 0.75
  eband_significant_force_lower_bound: 0.15
  costmap_weight: 12.5
